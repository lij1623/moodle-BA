<a class="skippy sr-only" href="#content">
  <span class="skippy-text">Skip to main content</span>
</a>


<div class="container-fluid p-0 bg-white" data-region="componentlibrary">
    <div class="row no-gutters flex-xl-nowrap">
        <div class="col-md-3 col-xl-2 sidebar">
            <div class="controls d-flex justify-content-between">
                <div class="simplesearchform w-100">
                    <form autocomplete="off" method="get" accept-charset="utf-8"
                        class="mform form-inline simplesearchform p-2 justify-content-center">
                        <div class="input-group w-100" data-region="docsearch">
                            <label for="searchinput-componentlibrary">
                                <span class="sr-only">Search component library</span>
                            </label>
                            <input type="text" id="searchinput-componentlibrary" class="form-control rounded" placeholder="Search"
                                aria-label="Search component library" name="clsearch" data-region="input" autocomplete="off">
                            <ul class="dropdown-menu w-100">
                            </ul>
                        </div>
                    </form>
                </div>
                <button class="btn bd-search-docs-toggle d-md-none p-0 ml-3" type="button" data-toggle="collapse"
                    data-target="#docssidebar" aria-controls="docssidebar" aria-expanded="false" aria-label="Toggle docs navigation">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false">
                        <title>Menu</title>
                        <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                            d="M4 7h22M4 15h22M4 23h22"></path>
                    </svg>
                </button>
            </div>
            
<nav id="docssidebar" class="collapse d-md-block docs-sidebar" aria-label="Component Library Navigation">
<ul>

<li class="parent"><a href="#" data-toggle="collapse" data-target="#collapse653a408ab95e41dcde1c00945f6c01a9" aria-expanded="true" aria-controls="collapse653a408ab95e41dcde1c00945f6c01a9" class="dropdown-toggle"><div class="text-truncate">Moodle</div></a>
  
<ul id="collapse653a408ab95e41dcde1c00945f6c01a9" class="sub-menu collapse show">

<li class="parent"><a href="#" data-toggle="collapse" data-target="#collapsee74fae0ce25d18ab8db372c1fbe8aff4" aria-expanded="true" aria-controls="collapsee74fae0ce25d18ab8db372c1fbe8aff4" class="dropdown-toggle"><div class="text-truncate">Moodle Components</div></a>
  
<ul id="collapsee74fae0ce25d18ab8db372c1fbe8aff4" class="sub-menu collapse show">
<li class=""><a href="http://MOODLEROOT/moodle/components/activityicons/">Activity icons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/buttons/">Buttons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/coursecards/">Course cards</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/form-elements/">Form elements</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/footer/">Footer</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/moodle-icons/">Icons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/notifications/">Notifications</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/toggle/">Toggle input</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/search-input/">Search input</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/dom-modal/">HTML Modals</a></li>
<li class="active"><a href="http://MOODLEROOT/moodle/components/dynamictabs/">Dynamic tabs</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse2deb5d1f39ceccabee606a451a2aff3f" aria-expanded="true" aria-controls="collapse2deb5d1f39ceccabee606a451a2aff3f" class="dropdown-toggle"><div class="text-truncate">JavaScript</div></a>
  
<ul id="collapse2deb5d1f39ceccabee606a451a2aff3f" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/javascript/confirm/">Confirm</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/toast/">Toast</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/emojipicker/">Emojipicker</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/sortable-list/">Sortable list</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/charts/">Moodle Charts</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapsec0c192728c4cce66abc09c21eccf41fa" aria-expanded="true" aria-controls="collapsec0c192728c4cce66abc09c21eccf41fa" class="dropdown-toggle"><div class="text-truncate">Accessibility</div></a>
  
<ul id="collapsec0c192728c4cce66abc09c21eccf41fa" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/links/">Links</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/contrast/">Colour contrast</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/keyboard-access/">Keyboard access</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse7b7cb3e12f31632afcffe09ab4202917" aria-expanded="true" aria-controls="collapse7b7cb3e12f31632afcffe09ab4202917" class="dropdown-toggle"><div class="text-truncate">Themes</div></a>
  
<ul id="collapse7b7cb3e12f31632afcffe09ab4202917" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/themes/colours/">Colours</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/grids/">Grids</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/positioning/">Positioning</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/spacing/">Spacing</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/iconsizes/">Icon Sizes</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/layout/">Layout</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/text/">Text</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse291db7b30d95093b0765f3db5fe6bca5" aria-expanded="true" aria-controls="collapse291db7b30d95093b0765f3db5fe6bca5" class="dropdown-toggle"><div class="text-truncate">Bootstrap</div></a>
  
<ul id="collapse291db7b30d95093b0765f3db5fe6bca5" class="sub-menu collapse ">

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse009bef104667193394aaf77c01061c8c" aria-expanded="true" aria-controls="collapse009bef104667193394aaf77c01061c8c" class="dropdown-toggle"><div class="text-truncate">Layout</div></a>
  
<ul id="collapse009bef104667193394aaf77c01061c8c" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/bootstrap/layout/grid/">Grid system</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/layout/overview/">Overview</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/layout/utilities-for-layout/">Utilities for layout</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapsef99b02bb1dd3b8e3f2c5b662963f8616" aria-expanded="true" aria-controls="collapsef99b02bb1dd3b8e3f2c5b662963f8616" class="dropdown-toggle"><div class="text-truncate">Content</div></a>
  
<ul id="collapsef99b02bb1dd3b8e3f2c5b662963f8616" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/bootstrap/content/code/">Code</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/content/figures/">Figures</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/content/images/">Images</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/content/reboot/">Reboot</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/content/tables/">Tables</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/content/typography/">Typography</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse1372a1d1f900e083c53e963de875c47e" aria-expanded="true" aria-controls="collapse1372a1d1f900e083c53e963de875c47e" class="dropdown-toggle"><div class="text-truncate">Utilities</div></a>
  
<ul id="collapse1372a1d1f900e083c53e963de875c47e" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/borders/">Borders</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/clearfix/">Clearfix</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/close-icon/">Close icon</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/colors/">Colors</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/display/">Display property</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/embed/">Embeds</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/flex/">Flex</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/float/">Float</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/image-replacement/">Image replacement</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/interactions/">Interactions</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/overflow/">Overflow</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/position/">Position</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/screen-readers/">Screen readers</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/shadows/">Shadows</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/sizing/">Sizing</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/spacing/">Spacing</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/stretched-link/">Stretched link</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/text/">Text</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/vertical-align/">Vertical alignment</a></li>
<li class=""><a href="http://MOODLEROOT/bootstrap/utilities/visibility/">Visibility</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse962b49a8b260f7f2f347d1907e33daa4" aria-expanded="true" aria-controls="collapse962b49a8b260f7f2f347d1907e33daa4" class="dropdown-toggle"><div class="text-truncate">Extend</div></a>
  
<ul id="collapse962b49a8b260f7f2f347d1907e33daa4" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/bootstrap/extend/approach/">Approach</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="#" data-toggle="collapse" data-target="#collapse9ba5be266a0aa16e270533121dec231a" aria-expanded="true" aria-controls="collapse9ba5be266a0aa16e270533121dec231a" class="dropdown-toggle"><div class="text-truncate">Component library</div></a>
  
<ul id="collapse9ba5be266a0aa16e270533121dec231a" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/library/getting-started/">Getting started</a></li>
<li class=""><a href="http://MOODLEROOT/library/adding-pages/">Adding pages</a></li>
<li class=""><a href="http://MOODLEROOT/library/adding-images/">Adding images</a></li>
<li class=""><a href="http://MOODLEROOT/library/syntax-highlighting/">Syntax highlighting</a></li>
<li class=""><a href="http://MOODLEROOT/library/component-library-backend/">Component Library Backend</a></li>
<li class=""><a href="http://MOODLEROOT/library/example-files/">Example files</a></li>
<li class=""><a href="http://MOODLEROOT/library/moodle-javascript/">Moodle JavaScript</a></li>
<li class=""><a href="http://MOODLEROOT/library/moodle-templates/">Moodle templates</a></li>
</ul>
  
</li>
</ul>
</nav>



        </div>
        
        <div class="col-md-9 col-xl-10 py-md-3 pl-md-5 pr-md-5 bd-content">
        
            <h1 class="bd-title" id="content">Dynamic tabs</h1>
            <p class="bd-lead"></p>

            

            
              

                  <div class="badge badge-info">MDL-71943</div>

              

                  <div class="badge badge-info">4</div>

              
            

            <h2 id="how-it-works">How it works</h2>
<p>Dynamic tabs are tabs that load content in AJAX requests. Once the user clicks on the tab heading, the page does not reload but the content of the respective tab loads in AJAX request.</p>
<h2 id="source-files">Source files</h2>
<ul>
<li><code>lib/amd/src/dynamic_tabs.js</code></li>
<li><code>lib/amd/src/local/repository/dynamic_tabs.js</code></li>
<li><code>lib/classes/external/dynamic_tabs_get_content.php</code></li>
<li><code>lib/classes/output/dynamic_tabs.php</code></li>
<li><code>lib/classes/output/dynamic_tabs/base.php</code></li>
<li><code>lib/db/services.php</code></li>
<li><code>lib/templates/dynamic_tabs.mustache</code></li>
</ul>
<h2 id="how-to-use-dynamic-tabs">How to use dynamic tabs</h2>
<p>First of all we need to create a tab class file for each tab that we need, extending <code>lib/classes/output/dynamic_tabs/base.php</code>.</p>
<p>These tab classes need to include these 4 methods in order to work:</p>
<ul>
<li><code>export_for_template</code> returns the data we export to the template</li>
<li><code>get_tab_label</code> returns the tab title</li>
<li><code>is_available</code> checks the tab permission and returns true/false that will enable/disable the individual tab</li>
<li><code>get_template</code> returns the path to the tab template file</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="k">class</span> <span class="nc">tab1</span> <span class="k">extends</span> <span class="nx">base</span> <span class="p">{</span>

    <span class="sd">/**
</span><span class="sd">     * Export this for use in a mustache template context.
</span><span class="sd">     *
</span><span class="sd">     * @param renderer_base $output
</span><span class="sd">     *
</span><span class="sd">     * @return stdClass
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">export_for_template</span><span class="p">(</span><span class="nx">renderer_base</span> <span class="nv">$output</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$content</span> <span class="o">=</span> <span class="p">(</span><span class="nx">object</span><span class="p">)[];</span>
        <span class="nv">$content</span><span class="o">-&gt;</span><span class="na">customtext</span> <span class="o">=</span> <span class="s1">&#39;Tab 1 content example&#39;</span><span class="p">;</span>
        <span class="k">return</span> <span class="nv">$content</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * The label to be displayed on the tab
</span><span class="sd">     *
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">get_tab_label</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;Tab 1&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Check permission of the current user to access this tab
</span><span class="sd">     *
</span><span class="sd">     * @return bool
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">is_available</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span> <span class="p">{</span>
        <span class="c1">// Define the correct permissions here.
</span><span class="c1"></span>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Template to use to display tab contents
</span><span class="sd">     *
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">get_template</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;tool_componentlibrary/dynamictabs_tab1&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<p>Then we need to create the templates that each <code>get_template</code> method will call.</p>
<p>Finally, to add dynamic tabs to our page, we just need to call all the previously created tabs, and pass the attributes
needed in each tab.</p>
<p>These attributes will be stored as &ldquo;data attributes&rdquo; in the DOM and can be also used inside our tab classes
using <code>get_data</code> method (for example to check permissions in <code>is_available</code>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
    <span class="nv">$tabs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">tab1</span><span class="p">([</span><span class="s1">&#39;demotab&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Tab1&#39;</span><span class="p">,</span> <span class="s1">&#39;reportid&#39;</span> <span class="o">=&gt;</span> <span class="nv">$reportid</span><span class="p">]),</span>
        <span class="k">new</span> <span class="nx">tab2</span><span class="p">([</span><span class="s1">&#39;demotab&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Tab2&#39;</span><span class="p">]),</span>
    <span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render_from_template</span><span class="p">(</span><span class="s1">&#39;core/dynamic_tabs&#39;</span><span class="p">,</span> <span class="p">(</span><span class="k">new</span> <span class="nx">dynamic_tabs</span><span class="p">(</span><span class="nv">$tabs</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">export_for_template</span><span class="p">(</span><span class="nv">$OUTPUT</span><span class="p">));</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<h2 id="example">Example</h2>
<iframe src="../../../../examples/dynamictabs.php" style="overflow:hidden;height:400px;width:100%;border:0" title="Moodle dynamic tabs"></iframe>

        </div>
        
    </div>
</div>
